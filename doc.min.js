/*!
 * FED Guide v1.0.0
 * Copyright 2016
 */
"use strict";if("undefined"==typeof jQuery)throw new Error("please requires jQuery");!function(e){e.utils=e.utils||{isEmpty:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(t);return null!=a?unescape(a[2]):null},isPhone:function(e){return e?!!/^(13[0-9]|14[0-9]|15[0-9]||17[0-9]|18[0-9])\d{8}$/i.test(e):this},unixToLocal:function(e){var t=new Date(1e3*e),a={year:t.getFullYear(),month:t.getMonth()+1?"0"+(t.getMonth()+1):t.getMonth()+1,day:t.getDate()<10?"0"+t.getDate():t.getDate(),hour:t.getHours()<10?"0"+t.getHours():t.getHours(),min:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),second:t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds()};return a},formatTime:function(e){var t=this,a=t.unixToLocal(e);return a.year+"-"+a.month+"-"+a.day+" "+a.hour+":"+a.min+":"+a.second},getNowTime:function(){var e=new Date,t=e.getTime();return parseInt(t/1e3)},dateDiff:function(e,t,a){var n=0;switch(a){case"Y":n=e.getFullYear()-t.getFullYear();break;case"M":n=12*(e.getFullYear()-t.getFullYear())+(e.getMonth()-t.getMonth());break;case"d":n=(e-t)/864e5;break;case"h":n=(e-t)/36e5;break;case"m":n=(e-t)/6e4;break;case"s":n=(e-t)/1e3;break;case"F":var r=e-t,o=Math.floor(r/86400),i=r%86400,s=Math.floor(i/3600),c=i%3600,l=Math.floor(c/6e3);n=o>=1?o+"天":1>o&&s>=1?s+"小时":1>s&&l>=1?l+"分":0;break;default:var r=e-t,o=Math.floor(r/86400),i=r%864e5,s=Math.floor(i/3600),c=i%36e5,l=Math.floor(c/60);n=o>=1?o+"天"+s+"小时"+l+"分":1>o&&s>=1?s+"小时"+l+"分":l+"分"}return n},dateAdd:function(e,t,a){switch(e){case"y":t.setFullYear(t.getFullYear()+a);break;case"q":t.setMonth(t.getMonth()+3*a);break;case"n":t.setMonth(t.getMonth()+a);break;case"d":t.setDate(t.getDate()+a);break;case"w":t.setDate(t.getDate()+7*a);break;case"h":t.setHours(t.getHours()+a);break;case"m":t.setMinutes(t.getMinutes()+a);break;case"s":t.setSeconds(t.getSeconds()+a);break;case"i":t.setMilliseconds(t.getMilliseconds()+a);break;default:t.setMilliseconds(t.getMilliseconds()+a)}return t},addDays:function(e,t){var a=new Date(e);a=a.valueOf(),a+=24*t*60*60*1e3,a=new Date(a);var n=a.getFullYear(),r=a.getMonth()+1,o=a.getDate();9>=r&&(r="0"+r),9>=o&&(o="0"+o);var i=n+"-"+r+"-"+o;return i},str2Date:function(e,t){t=t||"%Y-%M-%d %h:%m:%s",t=t.replace(/\-/g,"\\-"),t=t.replace(/\|/g,"\\|"),t=t.replace(/\./g,"\\."),t=t.replace(/\+/g,"\\+"),t=t.replace("%Y","(\\d{4})"),t=t.replace("%M","(\\d{1,2})"),t=t.replace("%d","(\\d{1,2})"),t=t.replace("%h","(\\d{1,2})"),t=t.replace("%m","(\\d{1,2})"),t=t.replace("%s","(\\d{1,2})");var a=new RegExp("^"+t+"$"),n=a.exec(e),r=(n[1]||0)-0,o=(n[2]||1)-1,i=(n[3]||0)-0,s=(n[4]||0)-0,c=(n[5]||0)-0,l=(n[6]||0)-0;return new Date(r,o,i,s,c,l)},str2Str:function(e,t,a,n){t=t||"%M%d",a="undefined"!=typeof a?a:!0,n=n||"%Y%M%d";var r=this.str2Date(e,n);return this.date2Str(r,t,a)},date2Str:function(e,t,a){a=!0;var n=e.getFullYear(),r=e.getMonth()+1,o=e.getDate(),i=e.getHours(),s=e.getMinutes(),c=e.getSeconds();return a&&(r=10>r?"0"+r:r,o=10>o?"0"+o:o,i=10>i?"0"+i:i,s=10>s?"0"+s:s,c=10>c?"0"+c:c),t=t||"%Y-%M-%d %h:%m:%s",t=t.replace(/%Y/g,n).replace(/%M/g,r).replace(/%d/g,o).replace(/%h/g,i).replace(/%m/g,s).replace(/%s/g,c)},setTimer:function(e,t,a){var n=setInterval(function(){e.html(t+" 秒后重新获取"),t--,0>=t&&(clearInterval(n),setTimeout(function(){a&&e.parents().find(a).removeClass("disabled"),e.html("获取动态码").removeClass("disabled")},10))},1e3)},bindEvents:function(e){for(var t in e)e[t].selector?$(e[t].element).on(e[t].event,e[t].selector,e[t].handler):$(e[t].element).on(e[t].event,e[t].handler)},returnFalse:function(e,t){switch(t=t||0,parseInt(t,10)){case 1:e.stopPropagation();break;case 2:e.preventDefault();break;default:e.stopPropagation(),e.preventDefault()}return null},subString:function(e,t){for(var a=0,n="",r=/[^\x00-\xff]/g,o="",i=e.replace(r,"**").length,s=0;i>s&&(o=e.charAt(s).toString(),null!=o.match(r)?a+=2:a++,!(a>t));s++)n+=o;return i>t&&(n+="..."),n},fen2Yuan:function(e){var t=/^[\+|-]?[0-9]+$/;return"string"!=typeof e&&(e=e.toString()),t.test(e)?(parseFloat(e)/100).toFixed(2):"0.00"},yuan2Fen:function(e){var t=/^[\+|-]?\d+(\.\d+)?$/;return"string"!=typeof e&&(e=e.toString()),t.test(e)?(100*parseFloat(e)).toFixed(0):"0"},formatCurrency:function(e){var e,t,a;e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0"),t=e==(e=Math.abs(e)),e=Math.floor(100*e+.50000000001),a=e%100,e=Math.floor(e/100).toString(),10>a&&(a="0"+a);for(var n=0;n<Math.floor((e.length-(1+n))/3);n++)e=e.substring(0,e.length-(4*n+3))+","+e.substring(e.length-(4*n+3));return(t?"":"-")+e+(0==a?"":"."+a)}},e.tpl=e.tpl||{loadTpl:function(e){var t=$("#"+e).html();return t},renderTpl:function(e,t){var a=_.template(e),n=a(t);return n},renderTplById:function(e,t){var a=this.loadTpl(e),n=_.template(a),r=n(t);return r},debug:function(){Handlebars.registerHelper("debug",function(e){console.group("当前上下文"),console.log(this),console.groupEnd(),e&&(console.group("传入的值"),console.debug(e),console.groupEnd())})}},e.xhr=e.xhr||{getRequestURL:function(t){var a,n="/",r=(t.port||window.location.port,t.query||{}),o=t.func||"",i=n+o+(e.utils.isEmpty(r)?"":"?");for(a in r)i+=a+"="+r[a]+"&";return i.replace(/&$/gi,"")},ajaxCall:function(t,a){t=t||{},t.data=t.data?t.data:"",t.method=t.method||"GET",t.dataType=t.dataType||"json",t.loading=t.loading||!1,t.url=t.url?t.url:e.xhr.getRequestURL(t),$.ajax({url:t.url,method:t.method,data:t.data,dataType:t.dataType,xhrFields:{withCredentials:!0},beforeSend:function(e,a){t.loading&&$.hbLoading()},complete:function(e,a){t.loading&&$.hideLoading()},error:function(e,a,n){t.loading&&$.hideLoading()},success:function(e){e&&("function"==typeof a?a(e):"")}})},jsonpCall:function(t,a){t=t||{},t.data=t.data?t.data:"",t.method=t.method||"POST",t.url=t.url?t.url:e.xhr.getRequestURL(t),$.ajax({url:t.url,method:t.method,data:t.data,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonpReturn",xhrFields:{withCredentials:!0},beforeSend:function(e,a){t.hbLoading&&$.hbLoading()},complete:function(e,a){t.hbLoading&&$.hideLoading()},error:function(e,a,n){t.hbLoading&&$.hideLoading(),$.hbToast("服务器返回错误，请稍后再试...")},success:function(e){e&&("function"==typeof a?a(e):"")}})}},e.track=e.track||{trackEvent:function(){$("body").on("click","[hbTrack]",function(){var t=$(this).attr("hbTrack");t=t.split(","),_hbt.push(["_trackEvent",t[0],t[1],t[2],t[3],t[4]]),e.track.sendLog()})},autoTrackEvent:function(t){_param=t.split(","),_hbt.push(["_trackEvent",_param[0],_param[1],_param[2],_param[3],_param[4]]),e.track.sendLog()},sendLog:function(){var e="",t={};if(_hbt)for(var a in _hbt)switch(_hbt[a][0]){case"_setPid":t.pid=_hbt[a][1];break;case"_trackEvent":t.page=_hbt[a][1],t.grade=_hbt[a][2],t.subject=_hbt[a][3],t.course=_hbt[a][4],_hbt[a][5]&&(t.other=_hbt[a][5])}for(var a in t)""!=e&&(e+="&"),e+=a+"="+encodeURIComponent(t[a]);var n=new Image(1,1),r="";r=$CONFIG.domain.host.indexOf("test2")>0?"http://dev.www.haibian.com/c.gif?":"http://logserver.haibian.com/c.gif?",n.src=r+e},init:function(){var e=this;e.trackEvent()}}}(HBUI),$(function(){$("body").css("visibility","visible")});